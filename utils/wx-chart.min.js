/*!
 * wx-chart.js
 * Chart for WeiXin application
 * Version: 1.0.0
 *
 * Copyright 2016 Jone Casper
 * Released under the MIT license
 * https://github.com/xch89820/wx-chart/blob/master/LICENSE.md
 */
"use strict";var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){if("object"===("undefined"==typeof exports?"undefined":_typeof2(exports))&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.wxChart=t()}}(function(){return function t(e,n,i){function r(a,l){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!l&&u)return u(a,!0);if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},f=t("../util/wxCanvas"),h=(i(f),t("./wxChart")),d=i(h),p=t("../core/title"),g=i(p),y=t("../core/scale"),v=(i(y),t("../scale/scale.liner")),x=i(v),b=t("../scale/scale.crosshelp"),_=i(b),w=t("../scale/scale.category"),m=i(w),k=t("../core/legend"),S=i(k),P=t("../core/layout"),C=i(P),A=t("../util/helper"),O=t("../util/tinycolor"),W=i(O),T=t("../util/randomColor"),j=i(T),M={borderWidth:1,fillArea:!0,fillAlpha:.5,display:!0,barPercentage:.8},R={minBetweenPixel:5,pointPercentage:.8,stacked:!1,zeroLine:!1,xScaleOptions:{position:"bottom"},xScaleItemOptions:void 0,yScaleOptions:{position:"left"},yScaleItemOptions:void 0,crossScaleOptions:{xMargin:function(t,e,n,i,r,o){return i.calculateTickWidth(o,t)},xFirstPointSpace:0},title:void 0,legends:[],legendOptions:{position:"bottom"},color:{hue:"red",luminosity:"light"},defaultKey:"value"},B={display:!0},E=function(t){function e(t,n){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return r.chartConfig=(0,A.extend)({},R,n),r.title=null,r.chartConfig.title&&(r.title=new g.default(r,A.is.PureObject(r.chartConfig.title)?r.chartConfig.title:null),r.titleText=A.is.String(r.chartConfig.title)?r.chartConfig.title:r.chartConfig.title.text),r.legend=new S.default(r,r.chartConfig.legendOptions),r.yAxis=new x.default(r,r.chartConfig.yScaleOptions),r.xAxis=new m.default(r,r.chartConfig.xScaleOptions),r.wxCrossScale=new _.default(r.xAxis,r.yAxis,r.chartConfig.crossScaleOptions),r.wxLayout=new C.default(r),i}return l(e,t),s(e,[{key:"_getLegendConfig",value:function(){var t=this,e=t.chartConfig.defaultKey||"value",n=t.chartConfig.legends;if(n)n=n.map(function(t){return(0,A.extend)(!0,{key:e},t)});else{if(!t.labels||!t.labels.length)throw new Error("Can not get legend config!");n=t.labels.map(function(t){return{text:t,key:e}})}return n}},{key:"update",value:function(t){var n=this;return n._labels=null,n._legends=null,c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t,B),n.draw()}},{key:"draw",value:function(){var t=void 0,e=this,n=e.ctx,i=e.wxLayout,r=e.chartConfig,o=(r.pointPercentage,r.minBetweenPixel,r.stacked,r.color),a=r.zeroLine;t=i.adjustBox(),e.title&&(e.title.update(e.titleText,t),i.addBox(e.title.box)),t=i.adjustBox();var l=(0,j.default)((0,A.extend)(!0,{},o,{count:e.legends.length}));e.legends=e.legends.map(function(t,e){return t.strokeStyle||(t.strokeStyle=t.borderColor||(0,W.default)(l[e]).darken(10).toString()),(0,A.extend)(!0,{fillStyle:l[e]},M,t)}),e.legend.update(e.legends,t),i.addBox(e.legend.box),e._drawScale(),e.barRuler=e.calculateBarRuler();var u=!1,s=e.legends.map(function(t,n){var i={legend:t},r=t.key;return i.dataset=e.visDatasets.map(function(t,i){return u=u||t[r]<0,{value:t[r],data:t,point:e.calculateBarRect(i,n)}}),i});if(s.forEach(function(t){return e._drawBar(t,u)}),a){n.save(),n.fillStyle=e.xAxis.config.color,n.lineWidth=e.xAxis.config.lineWidth;var c=e.yAxis.getPoint(0).y,f=[e.xAxis.getPoint(-1).x,c],h=[e.xAxis.box.ex,c];n.beginPath(),n.moveTo.apply(n,f),n.lineTo.apply(n,h),n.stroke(),n.restore()}}},{key:"_drawBar",value:function(t,e){var n=this,i=n.chartConfig.stacked,o=n.ctx,a=t.legend,l=t.dataset,u=a.display,s=a.borderWidth,c=a.fillStyle,f=a.strokeStyle,h=a.fillArea,d=a.fillAlpha;u&&(o.save(),o.fillStyle=c,o.strokeStyle=f,o.lineWidth=s,l.forEach(function(t){o.beginPath();var n=(t.value,t.data,t.point);if(i&&e)o.rect(n.x,n.y,n.barWidth,n.barHeight),s&&o.stroke(),h&&(o.globalAlpha=d,o.fill(),o.globalAlpha=1);else{var a=[[n.x,n.y+n.barHeight],[n.x,n.y],[n.x+n.barWidth,n.y],[n.x+n.barWidth,n.y+n.barHeight]];o.moveTo.apply(o,r(a[0])),o.lineTo.apply(o,r(a[1])),o.lineTo.apply(o,r(a[2])),o.lineTo.apply(o,r(a[3])),s&&o.stroke(),h&&(o.globalAlpha=d,o.fill(),o.globalAlpha=1)}}),o.draw(),o.restore())}},{key:"calculateBarRuler",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.xAxis,e=this,n=void 0,i=e.chartConfig.barPercentage,o=e.chartConfig.pointPercentage,a=e.chartConfig.stacked,l=e.legends,u=l.length,s=t.calculateTickWidth(),c=s*o,f=(s-c)/2,h=0;if(i||(i=a?Math.max.apply(Math,r(l.map(function(t){return t.barPercentage||.8})))||.8:.8),n=Math.max.apply(Math,r([i*c].concat(l.map(function(t){return A.is.Number(t.barWidth)?t.barWidth:0})))),l.forEach(function(t){if(a)t.barWidth=n,t.barPercentage=i,t._standardPercentage=i/u;else{var e=void 0,r=t.barPercentage?t.barPercentage>1?1:t.barPercentage:i;t.barWidth?e=t.barWidth/s:(e=r/u,t.barWidth=c*e),h+=e,t._standardPercentage=e}}),h>1)throw Error("Bar's width too large!");a&&(h=i);var d=u>1?c*(1-h)/(u-1):c*(1-h);return{tickWidth:s,pointPercentage:o,pointWidth:c,pointIntervalWidth:f,legends:l,barIntervalWidth:d}}},{key:"calculateBarRect",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.xAxis,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.yAxis,r=this,o=r.chartConfig.stacked,a=r.barRuler||r.calculateBarRuler(n),l=r.legends[e];if(l){var u=r.legends.slice(0,e).reduce(function(t,e){return t+e.barWidth},0),s=r.visDatasets[t],c=l.key&&"undefined"!=typeof s[l.key]?s[l.key]:null;if(!A.is.Null(c)&&!A.is.Undefined(c)){var f=void 0,h=void 0,d=void 0,p=void 0,g=n.getPoint(t);if(o){f=g.x-a.pointWidth/2+a.barIntervalWidth/2,h=r._getStackPoint(t,e,a).y,d=l.barWidth;var y=i.getPoint(0).y;p=c<0?c/l.sumNeg*(i.getPoint(l.sumNeg).y-y):c/l.sumPos*(y-i.getPoint(l.sumPos).y)}else f=g.x-a.pointWidth/2+u+a.barIntervalWidth/2*(e+1),h=i.getPoint(c).y,d=l.barWidth,p=g.y-h;return{x:f,y:h,barWidth:d,barHeight:p}}}}},{key:"_getStackPoint",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.yAxis,r=this,o=r.visDatasets[t],a=o[r.legends[e].key],l=void 0,u=0,s=0,c=0;c<e;c++)l=o[r.legends[c].key],l<0?u+=l||0:s+=l||0;return a<0?i.getPoint(u):i.getPoint(s+a)}},{key:"_drawScale",value:function(){var t=void 0,e=this,n=e.wxLayout;t=n.adjustBox();var i=e.xScaleAxisDatas(),r=e.yScaleAxisDatas(t),o=e.wxCrossScale.draw(t,i,r),a=o.xBox,l=o.yBox;n.addBox(a),n.addBox(l)}},{key:"yScaleAxisDatas",value:function(t){var e=this,n=e.chartConfig.stacked,i=e.ctx,o=e.chartConfig.yScaleItemOptions,a=e.yAxis.calculateTickLimit(t,i);if(!n){var l=this.visDatasets.reduce(function(t,n){var i=t.max,o=t.min;if(n.display){var a=e.legends.map(function(t){if(t.key)return n[t.key]||0}).concat(i,o);i=Math.max.apply(Math,r(a)),o=Math.min.apply(Math,r(a))}return{max:i,min:o}},{max:0,min:0}),s=l.max,c=l.min;return e.yAxis.buildDatasets(s,c,a,void 0,o)}var f=function(){var t=0,n=0;return e.legends.forEach(function(i){var r=i.key,o=0,a=0;e.visDatasets.forEach(function(t){var e=t[r];e<0?o+=e||0:a+=e||0}),o<t&&(t=o),a>n&&(n=a),i.sumNeg=o,i.sumPos=a}),{v:e.yAxis.buildDatasets(n,t,a,void 0,o)}}();if("object"===("undefined"==typeof f?"undefined":u(f)))return f.v}},{key:"xScaleAxisDatas",value:function(){var t=this,e=t.chartConfig.xScaleItemOptions,n=t.labels.map(function(t){var n={text:t};return"undefined"!=typeof e&&(n=(0,A.extend)(n,e)),n});return t.xAxis.buildDatasets(n)}},{key:"labels",get:function(){var t=this,e=void 0;return t._labels?t._labels:(e=t.chartConfig.labels)&&A.is.Array(e)?e:(t._labels=t.visDatasets.map(function(t){return t.label}),t._labels)}},{key:"legends",get:function(){var t=this;return t._legends||(t._legends=t._getLegendConfig()),t._legends},set:function(t){this._legends=t}}]),e}(d.default);n.default=E},{"../core/layout":6,"../core/legend":7,"../core/scale":8,"../core/title":9,"../scale/scale.category":10,"../scale/scale.crosshelp":11,"../scale/scale.liner":12,"../util/helper":13,"../util/randomColor":14,"../util/tinycolor":15,"../util/wxCanvas":16,"./wxChart":4}],2:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},s=t("../util/wxCanvas"),c=(i(s),t("./wxChart")),f=i(c),h=t("../core/title"),d=i(h),p=t("../core/layout"),g=i(p),y=t("../core/legend"),v=i(y),x=t("../util/randomColor"),b=i(x),_=t("../util/helper"),w={cutoutPercentage:50,rotation:Math.PI*-.5,color:{hue:"red",luminosity:"light"},title:void 0,borderWidth:2,padding:void 0,labelDistancePercentage:.15},m={display:!0,fontSize:10,percentage:100},k=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=i;return a.chartConfig=(0,_.extend)({},w,n),a.title=null,a.chartConfig.title&&(a.title=new d.default(a,_.is.PureObject(a.chartConfig.title)?a.chartConfig.title:null),a.titleText=_.is.String(a.chartConfig.title)?a.chartConfig.title:a.chartConfig.title.text),a.legend=new v.default(a,a.chartConfig.legendOptions),a.wxLayout=new g.default(a),i}return a(e,t),l(e,[{key:"update",value:function(t){var n=this;return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t,m),n.draw()}},{key:"draw",value:function(){var t=void 0,e=this,n=e.wxLayout,i=e.chartConfig,r=i.cutoutPercentage,o=i.rotation,a=i.color,l=(i.title,i.borderWidth),u=i.padding;t=n.adjustBox(),e.title&&(e.title.update(e.titleText,t),n.addBox(e.title.box)),t=n.adjustBox();var s=(0,b.default)((0,_.extend)(!0,{},a,{count:e.visDatasets.length})),c=(0,b.default)({hue:a.hue||"black",luminosity:"dark",count:1}),f=[];e.visDatasets.forEach(function(t,n){t.color||(t.color=s[n]),t.borderColor||(t.borderColor=e.config.backgroundColor||"#ffffff");var i=t.legend;!i||_.is.String(i)?f.push({hidden:t.hidden||!1,text:_.is.String(i)?i:t.label,fillStyle:t.color,strokeStyle:c[0]}):_.is.PureObject(i)&&f.push((0,_.extend)({hidden:t.hidden},i))}),e.legend.update(f,t),n.addBox(e.legend.box),t=n.adjustBox(),u=u||.1*t.width,t.width-=u,t.height-=u,e.box=t;var h=t,d=h.x,p=h.y,g=h.width,y=h.height,v=h.outerWidth,x=h.outerHeight,w=Math.min(g,y),m=Math.max((w-2*l)/2,0),k=r?m/100*r:0,S=(e.config.backgroundColor||"#ffffff",e.calculateTotal()),P=d+v/2,C=p+x/2,A=o;e.initAvoidCollision(),e.visDatasets.forEach(function(t,n){var i=A,r=i+2*Math.PI*(t.value/S),o={pointX:P,pointY:C,startAngle:i,endAngle:r,innerRadius:k,outerRadius:m,totalValue:S,borderWidth:l};e.drawData(t,o),e.drawLabel(t,o),A=r}),n.addBox(e.box)}},{key:"drawData",value:function(t,e){var n=this,i=n.ctx,r=e.pointX,o=e.pointY,a=e.startAngle,l=e.endAngle,u=e.outerRadius,s=e.innerRadius,c=(e.totalValue,e.borderWidth),f=(t.label,t.value,t.color),h=t.borderColor,d=t.percentage,p=t.hidden,g=(u-s)/100*d;return p?l:(i.save(),i.beginPath(),i.arc(r,o,g,a,l),i.arc(r,o,s,l,a,!0),i.closePath(),i.strokeStyle=h,i.lineWidth=c||0,i.fillStyle=f,i.fill(),i.lineJoin="bevel",c&&i.stroke(),i.draw(),i.restore(),l)}},{key:"drawLabel",value:function(t,e){var n=this,i=n.ctx,r=n.chartConfig.labelDistancePercentage||.2,o=e.pointX,a=e.pointY,l=e.startAngle,u=e.endAngle,s=e.outerRadius,c=e.innerRadius,f=e.totalValue,h=(e.borderWidth,t.label),d=t.value,p=t.color,g=(t.borderColor,t.fontSize),y=t.percentage,v=t.format,x=t.hidden,b=(s-c)/100*y;if(h=_.is.Function(v)?v.call(n,h,d,f,b,t,e):h,!x){var w=l+(u-l)/2,m=Math.cos(w)*b+o,k=Math.sin(w)*b+a,S=b*r,P=b+S,C=Math.cos(w)*P+o,A=Math.sin(w)*P+a,O=n.avoidCollision({x:C,y:A},{x:o,y:a});C=O.x,A=O.y;var W=i.measureText(h).width,T=C+(C-o>0?S:-S),j=A,M=C-o>0?T+4:T-4-W,R=j+i.fontSize/2;i.save(),i.beginPath(),i.lineWidth=1,i.strokeStyle=p,i.fillStyle=p,i.fontSize=g,i.fontSize=i.moveTo(m,k),i.lineTo(C,A),i.lineTo(T,j),i.stroke(),i.fillText(h,M,R),i.draw(),i.restore()}}},{key:"initAvoidCollision",value:function(){this._lastPoint=null}},{key:"avoidCollision",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.ctx.fontSize+4,i=this,r=(i.box,e.x);e.y;if(i._lastPoint){var o=i._lastPoint.x,a=i._lastPoint.y,l=t.x,u=t.y;if((l-r)*(o-r)>0&&Math.abs(a-u)<n){var s=l-r>0?a+n:a-n;t.y=s}}return this._lastPoint=t,t}}]),e}(f.default);n.default=k},{"../core/layout":6,"../core/legend":7,"../core/title":9,"../util/helper":13,"../util/randomColor":14,"../util/wxCanvas":16,"./wxChart":4}],3:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=t("../util/wxCanvas"),f=(i(c),t("./wxChart")),h=i(f),d=t("../core/title"),p=i(d),g=t("../core/scale"),y=(i(g),t("../scale/scale.liner")),v=i(y),x=t("../scale/scale.crosshelp"),b=i(x),_=t("../scale/scale.category"),w=i(_),m=t("../core/legend"),k=i(m),S=t("../core/layout"),P=i(S),C=t("../util/helper"),A=t("../util/randomColor"),O=i(A),W={lineWidth:2,lineJoin:"miter",fillArea:!1,fillAlpha:.5,display:!0,spanGaps:!1,tension:.4},T={xScaleOptions:{position:"bottom"},xScaleItemOptions:void 0,yScaleOptions:{position:"left"},yScaleItemOptions:void 0,crossScaleOptions:{},title:void 0,legends:[],legendOptions:{position:"bottom"},color:{hue:"red",luminosity:"light"},defaultKey:"value"},j={pointRadius:4,pointStyle:"circle",pointBorderWidth:1.5,pointBorderColor:"#ffffff",tension:.4,display:!0},M=function(t){function e(t,n){o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),r=i;return r.chartConfig=(0,C.extend)({},T,n),r.title=null,r.chartConfig.title&&(r.title=new p.default(r,C.is.PureObject(r.chartConfig.title)?r.chartConfig.title:null),r.titleText=C.is.String(r.chartConfig.title)?r.chartConfig.title:r.chartConfig.title.text),r.legend=new k.default(r,r.chartConfig.legendOptions),r.yAxis=new v.default(r,r.chartConfig.yScaleOptions),r.xAxis=new w.default(r,r.chartConfig.xScaleOptions),r.wxCrossScale=new b.default(r.xAxis,r.yAxis,r.chartConfig.crossScaleOptions),r.wxLayout=new P.default(r),i}return l(e,t),u(e,[{key:"_getLegendConfig",value:function(){var t=this,e=t.chartConfig.defaultKey||"value",n=t.chartConfig.legends;if(n)n=n.map(function(t){return(0,C.extend)(!0,{key:e},t)});else{if(!t.labels||!t.labels.length)throw new Error("Can not get legend config!");n=t.labels.map(function(t){return{text:t,key:e}})}return n}},{key:"update",value:function(t){var n=this;return n._labels=null,n._legends=null,s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t,j),n.draw()}},{key:"draw",value:function(){var t=void 0,e=this,n=e.wxLayout,i=e.chartConfig,r=(i.cutoutPercentage,i.rotation,i.color);i.borderWidth,i.padding;t=n.adjustBox(),e.title&&(e.title.update(e.titleText,t),n.addBox(e.title.box)),t=n.adjustBox();var o=(0,O.default)((0,C.extend)(!0,{},r,{count:e.legends.length}));e.legends=e.legends.map(function(t,n){return t.strokeStyle||(t.strokeStyle=e.chartConfig.backgroundColor||t.borderColor||o[n]),(0,C.extend)(!0,{fillStyle:o[n]},W,t)}),e.legend.update(e.legends,t),n.addBox(e.legend.box),e._drawScale();var a=e.legends.map(function(t){var n={legend:t},i=t.key;return n.dataset=e.visDatasets.map(function(t,n){var r=t[i],o=void 0;if(r){var a=e.xAxis.getPoint(n),l=e.yAxis.getPoint(r);o={x:a.x,y:l.y}}return{value:r,point:o,data:t}}),n});a.forEach(function(t){return e._drawLine(t)})}},{key:"_drawScale",value:function(){var t=void 0,e=this,n=e.wxLayout;t=n.adjustBox();var i=e.xScaleAxisDatas(),r=e.yScaleAxisDatas(t),o=e.wxCrossScale.draw(t,i,r),a=o.xBox,l=o.yBox;n.addBox(a),n.addBox(l)}},{key:"_drawLine",value:function(t){var e=this,n=e.ctx,i=t.legend,r=t.dataset,o=i.display,a=i.spanGaps,l=i.tension,u=i.lineWidth,s=i.lineJoin,c=i.fillStyle,f=i.strokeStyle,h=i.fillArea,d=i.fillAlpha;if(o){n.save();var p=function(t,e,i){if(l&&0!==l){var r=(0,C.splineCurve)(t,e,i,l);t?n.bezierCurveTo(t.controlPoints.next.x,t.controlPoints.next.y,r.previous.x,r.previous.y,e.x,e.y):n.moveTo(e.x,e.y),e.controlPoints=r}else n.lineTo(e.x,e.y)},g=function t(e,n,i){if(!(n>=e.length-1)){var r=e[n+1];return r.point?r.point:i?t(e,n+1,i):void 0}};h&&!function(){var t=void 0,i=void 0,o=e.xAxis.getPoint(0).y,l=function(){n.globalAlpha=d,n.fill(),n.globalAlpha=1};n.beginPath(),n.lineWidth=0,n.fillStyle=c,r.forEach(function(e,u){var s=e.point;if(i)if(s)p(i,s,g(r,u,a));else{if(a)return;n.lineTo(i.x,o),n.lineTo(t.x,o),l(),t=void 0,n.beginPath()}else s&&(p(i,s,g(r,u,a)),t=s);i=s}),i&&t&&(n.lineTo(i.x,o),n.lineTo(t.x,o),l())}();var y=void 0,v=[];n.beginPath(),n.lineWidth=u,n.lineJoin=s,n.strokeStyle=f,r.forEach(function(t,e){var n=(t.value,t.point),i=t.data,o=i.pointBorderColor,l=i.pointBorderWidth,u=i.pointRadius,s=i.pointStyle;i.label;if(v.push({point:n,pointBorderColor:o,pointBorderWidth:l,pointRadius:u,pointStyle:s}),n)p(y,n,g(r,e,a));else if(a)return;y=n}),n.stroke(),n.fillStyle=c,v.forEach(function(t){var e=t.point,r=t.pointBorderColor,o=t.pointBorderWidth,a=t.pointRadius;t.pointStyle;e&&(n.beginPath(),a&&(n.arc(e.x,e.y,a,0,2*Math.PI),n.fill()),o&&(n.lineWidth=o,n.strokeStyle=r||i.strokeStyle,n.stroke()))}),n.draw(),n.restore()}}},{key:"yScaleAxisDatas",value:function(t){var e=this,n=e.ctx,i=(e.chartConfig.yScaleItemOptions,this.visDatasets.reduce(function(t,n){var i=t.max,o=t.min;if(n.display){var a=e.legends.map(function(t){if(t.key)return n[t.key]||0}).concat(i,o);i=Math.max.apply(Math,r(a)),o=Math.min.apply(Math,r(a))}return{max:i,min:o}},{max:0,min:0})),o=i.max,a=i.min,l=e.yAxis.calculateTickLimit(t,n);return e.yAxis.buildDatasets(o,a,l)}},{key:"xScaleAxisDatas",value:function(){var t=this,e=t.chartConfig.xScaleItemOptions,n=t.labels.map(function(t){var n={text:t};return"undefined"!=typeof e&&(n=(0,C.extend)(n,e)),n});return t.xAxis.buildDatasets(n)}},{key:"labels",get:function(){var t=this,e=void 0;return t._labels?t._labels:(e=t.chartConfig.labels)&&C.is.Array(e)?e:(t._labels=t.visDatasets.map(function(t){return t.label}),t._labels)}},{key:"legends",get:function(){var t=this;return t._legends||(t._legends=t._getLegendConfig()),t._legends},set:function(t){this._legends=t}}]),e}(h.default);n.default=M},{"../core/layout":6,"../core/legend":7,"../core/scale":8,"../core/title":9,"../scale/scale.category":10,"../scale/scale.crosshelp":11,"../scale/scale.liner":12,"../util/helper":13,"../util/randomColor":14,"../util/wxCanvas":16,"./wxChart":4}],4:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.wxChartInstances=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("../util/helper"),l=t("../util/wxCanvas"),u=i(l),s=t("../core/layout"),c={fontSize:10,width:300,height:200,display:"block",padding:0,backgroundColor:null},f=n.wxChartInstances={},h=function(){function t(e,n){r(this,t);var i=this,o=void 0;return a.is.PureObject(n)?o=(0,a.extend)({},c,n):(a.is.Number(n)||a.is.String(n))&&(o={width:arguments[1],height:2 in arguments?arguments[2]:c.height,display:3 in arguments?arguments[3]:c.display},4 in arguments&&a.is.PureObject(arguments[4])?(0,a.extend)({},c,o,arguments[4]):(0,a.extend)({},c,o)),i.canvas=new u.default(e,o),i.ctx=i.canvas.getContext("2d"),i.isWeiXinAPP=(0,a.checkWX)(),i.id=(0,a.uid)(),i._config=i.initConfig(o),i.initContext(),f[i.id+""]=i,i}return o(t,[{key:"initConfig",value:function(t){var e=this;e.canvas||console.error("Failed to create WxChart: can't acquire context!");var n=e.canvas,i=n.width,r=n.height;return t.aspectRatio=t.aspectRatio?t.aspectRatio:a.is.Undefined(r)||a.is.Undefined(i)?null:(i/i).toFixed(2),t.display=t.display||"block",t}},{key:"initContext",value:function(){var t=this;if(!t.canvas)return console.error("Failed to create WxChart: can't acquire context!"),t;(0,a.retinaScale)(t.ctx,t.canvas.width,t.canvas.height),t.config.fontSize&&(t.ctx.fontSize=t.config.fontSize);var e=t.config.padding||0;t.innerBox=new s.BoxInstance("top",0,0,t.canvas.width-2*e,t.canvas.height-2*e,t.canvas.width,t.canvas.height)}},{key:"clear",value:function(){var t=this;t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height),t.config.backgroundColor&&(t.ctx.save(),t.ctx.fillStyle=t.config.backgroundColor,t.ctx.fillRect(0,0,t.canvas.width,t.canvas.height),t.ctx.restore(),t.ctx.draw())}},{key:"destroy",value:function(){var t=this;t.clear(),t.canvas.releaseContext(),t.id&&t.id in f&&delete f[t.id],t.id=null,t.canvas=null,t.ctx=null,t._config=null,t.innerBox=null}},{key:"draw",value:function(){}},{key:"update",value:function(t,e){var n=this;if(!a.is.Undefined(t))return a.is.Array(t)||(t=[t]),t=t.map(function(t){return(0,a.extend)({},e,t)}),n.clear(),n._datasets=t,n._visDatasets=null,n._datasets}},{key:"calculateTotal",value:function(){var t=this.datasets,e=0,n=void 0;return t.forEach(function(t,i){n=parseFloat(t.value),a.is.NaN(n)||t.hidden||(e+=Math.abs(n))}),e}},{key:"config",get:function(){return this._config||(this._config=(0,a.extend)({},c)),this._config},set:function(t){var e=this;e.initConfig(t),e.initContext(),e.clear(),e.draw()}},{key:"datasets",get:function(){return this._datasets},set:function(t){return this.update(t)}},{key:"visDatasets",get:function(){return this._visDatasets?this._visDatasets:this._visDatasets=this.datasets.filter(function(t){return!!t.display})},set:function(t){}}]),t}();n.default=h},{"../core/layout":6,"../util/helper":13,"../util/wxCanvas":16}],5:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("../util/helper"),l=t("./layout"),u=t("../charts/wxChart"),s=i(u),c=t("../util/wxCanvas"),f=(i(c),function(){function t(e,n){r(this,t);var i=this;if(!e||!e instanceof s.default)throw new Error("Should be an WxChart instance");return i.wxChart=e,this._datasets=[],i}return o(t,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;if((a.is.Undefined(t)||a.is.Null(t))&&(t=n.datasets,!t))throw new Error("Datasets is null");return a.is.Array(t)||(t=[t]),t=t.map(function(t){return(0,a.extend)({},e,t)}),n._datasets=t,n._visDatasets=null,n._datasets}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,i=this;if(i.clear(),t){if(t=i.init(t),e&&e instanceof l.BoxInstance)e=i.box=i.calculateBox(e,t,n);else{if(!i.box)return;e=i.box}i.isVisiable()&&i.draw(t,e,n)}}},{key:"calculateBox",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.datasets,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config;return t}},{key:"setBox",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;e&&n.clear(),t&&t instanceof l.BoxInstance&&(n.box=t),e&&n.isVisiable()&&n.draw()}},{key:"draw",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.datasets,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.box,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config}},{key:"clear",value:function(){var t=this;t.box&&(t.wxChart.ctx.clearRect(t.box.x,t.box.y,t.box.outerWidth,t.box.outerHeight),t.wxChart.ctx.draw())}},{key:"isVisiable",value:function(){return!!this.config.display}},{key:"isHorizontal",value:function(){return"top"==this.position||"bottom"==this.position}},{key:"datasets",get:function(){return this._datasets},set:function(t){return this.update(t)}},{key:"visDatasets",get:function(){return this._visDatasets?this._visDatasets:this._visDatasets=this.datasets.filter(function(t){return!!t.display})},set:function(t){}},{key:"position",get:function(){return this.config.position},set:function(t){return this.config.position=t,this.update()}}]),t}());n.default=f},{"../charts/wxChart":4,"../util/helper":13,"../util/wxCanvas":16,"./layout":6}],6:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.BoxInstance=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("./base"),l=i(a),u=t("../util/helper"),s=n.BoxInstance=function(){function t(e,n,i,o,a,l,s){r(this,t);var c=this;if(u.is.PureObject(e)){var f=e;e=f.position,n=f.x,i=f.y,o=f.width,a=f.height;var h=f.padding,d=f.margin;u.is.Number(h)&&u.is.Number(d)?(l=o+2*h+2*d,s=a+2*h+2*d):(l=f.outerWidth,s=f.outerHeight)}c.position=e,c.width=o,c.height=a,c.outerWidth=l,c.outerHeight=s,Object.defineProperty(this,"x",{get:function(){return n},set:function(t){c.width+=n-t,c.outerWidth+=n-t,n=t}}),Object.defineProperty(this,"y",{get:function(){return i},set:function(t){c.height+=i-t,c.outerHeight+=i-t,i=t}})}return o(t,[{key:"clone",value:function(){var e=this;return new t(e.position,e.x,e.y,e.width,e.height,e.outerWidth,e.outerHeight)}},{key:"isIntersect",value:function(t){var e=this;return!(e.ex<t.x||e.x>t.ex||e.ey<t.y||e.y<t.ey)}},{key:"toObject",value:function(){return{position:this.position,x:this.x,y:this.y,ex:this.ex,ey:this.ey,lx:this.lx,ly:this.ly,rx:this.rx,ry:this.ry,width:this.width,height:this.height,outerHeight:this.outerHeight,outerWidth:this.outerWidth}}},{key:"ex",get:function(){return this.x+this.outerWidth}},{key:"ey",get:function(){return this.y+this.outerHeight}},{key:"lx",get:function(){return this.x+this.marginLR}},{key:"ly",get:function(){return this.y+this.marginTB}},{key:"rx",get:function(){return this.x+this.width+this.marginLR}},{key:"ry",get:function(){return this.y+this.height+this.marginTB}},{key:"marginLR",get:function(){return(this.outerWidth-this.width)/2},set:function(t){u.is.Number(t)&&(this.width-=2*t)}},{key:"marginTB",get:function(){return(this.outerHeight-this.height)/2},set:function(t){u.is.Number(t)&&(this.height-=2*t)}}]),t}(),c=function(){function t(e){r(this,t);var n=this;if(!e||!e instanceof l.default)throw new Error("Should be an WxChart instance");n.wxChart=e,n._boxs=[]}return o(t,[{key:"addBox",value:function(t){var e=this;if(!t instanceof s)throw new Error("Please add an BoxInstance Object");return parseInt(e._boxs.push(t))-1}},{key:"removeBox",value:function(t){var e=this;u.is.Number(t)?e._boxs.splice(t,1):t instanceof s&&e._boxs.splice(e._boxs.indexOf(t),1)}},{key:"removeAllBox",value:function(){this._boxs=[]}},{key:"adjustBox",value:function(){var t=this,e=t.wxChart.innerBox.clone();return t._boxs.forEach(function(t){var n=t.position,i=(t.x,t.y,t.height,t.width,t.outerWidth),r=t.outerHeight;switch(n){case"top":e.y+=r;break;case"bottom":e.outerHeight-=r,e.height-=r;break;case"left":e.x+=i;break;case"right":e.outerWidth-=i,e.width-=i}}),e}}]),t}();n.default=c},{"../util/helper":13,"./base":5}],7:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){
if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},c=t("./base"),f=i(c),h=t("../util/helper"),d=t("./layout"),p={display:!0,position:"top",fullWidth:!0,labels:{boxWidth:30,fontSize:10,padding:10}},g={lineWidth:1,display:!0},y=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.config=(0,h.extend)(!0,{},p,n),i}return a(e,t),u(e,[{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,i=this,r=i.config;return t=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t,n),t=i.calculateLegendItem(t,r),i._datasets=t,t}},{key:"calculateLegendItem",value:function(t,e){var n=this,i=e.labels||{},r=n.wxChart.ctx,o=i.boxWidth,a=i.fontSize;return!h.is.Array(t)&&h.is.PureObject(t)&&(t=[t]),t=t.map(function(t){var e=r.measureText(t.text).width,n=o+a/2+e;return t._prop={fontSize:a,boxHeight:a,boxWidth:o,textWidth:e,width:n},t})}},{key:"calculateBox",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.datasets,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,i=this,r=void 0,o=void 0,a=void 0,u=void 0,s=i.wxChart,c=s.ctx,f=c.fontSize,h=t.x,p=t.y,g=n.labels.padding||10;if(i.isHorizontal())!function(){a=n.fullWidth?t.width-2*g:n.width,r=n.fullWidth?t.width:n.width,u=f,o=u+2*g;var l=0,s=0,c=0;e.forEach(function(t){var e=t._prop,n=e.width+g,i=s+n;i>a?(c=c<s?s:c,l++,s=n,n>a&&(console.warn("The width options is too small! width=",a,".The chart will set to ",i),a=n)):s+=n,e.padding=g,e.lineNum=l,e.outerWidth=n}),c=c<s?s:c,l>0&&(u=f*(l+1)+l*f/2,o=u+2*g),h+=(a-c)/2,"bottom"==i.position&&(p=t.ry-o,p=p<t.y?t.y:p)}();else{var y=function(){var n=i.position.match(/left/)?"left":"right",a=i.position.match(/top/)?"top":"bottom",l=0,s=0;return e.forEach(function(t){var e=t._prop.width;l=l<e?e:l,t._prop.padding=g,t._prop.lineNum=s,t._prop.outerWidth=null,s++}),r=l+2*g,u=f*(s+1)+s*g/2,o=u+2*g,"bottom"==a&&(p=t.ry-o,p=p<t.y?t.y:p),"right"==n&&(h=t.rx-r,h=h<0?0:h),{v:new d.BoxInstance({position:n,x:h,y:p,width:l,outerWidth:r,height:u,outerHeight:o})}}();if("object"===("undefined"==typeof y?"undefined":l(y)))return y.v}return new d.BoxInstance({position:n.position,x:h,y:p,width:a,outerWidth:r,height:u,outerHeight:o})}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.datasets,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.box,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,this),i=n.wxChart.ctx,r=e.x,o=e.y;e.width,e.outerWidth,e.height,e.outerHeight;n.clear(),i.save();var a=-1,l=r,u=o;t.forEach(function(t){var e=t.text,n=t.display,s=t.fillStyle,c=t.fillAlpha,f=t.strokeStyle,h=t.lineCap,d=t.lineJoin,p=t.lineWidth,g=t._prop,y=g.width,v=g.fontSize,x=g.textWidth,b=g.padding,_=g.lineNum,w=g.boxWidth,m=g.boxHeight,k=g.outerWidth;if(y){i.textBaseline="top",i.textAlign="start",i.fillStyle=s,i.fontSize=v,i.strokeStyle=f,i.lineCap=h,i.lineJoin=d,i.lineWidth=p,a<_&&(a=_,l=r+b,u=o+_*v*1.5+b);var S=l;0!=i.lineWidth&&i.strokeRect(l,u,w,m),i.globalAlpha=c,i.fillRect(l,u,w,m),i.globalAlpha=1,l+=w+v/2,i.fillText(e,l,u),n||(i.save(),i.beginPath(),i.lineWidth=1,i.moveTo(l,u+v/2),i.lineTo(l+x,u+v/2),i.stroke(),i.restore()),l=S+k}}),i.restore(),i.draw()}}]),e}(f.default);n.default=y},{"../util/helper":13,"./base":5,"./layout":6}],8:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},s=t("../util/helper"),c=t("../util/wxCanvas"),f=(i(c),t("./layout")),h=t("./base"),d=i(h),p={display:!0,position:"top",extendLeft:0,extendTop:0,title:void 0,titleFontSize:12,titleFontColor:"#cccccc",color:"#000000",lineWidth:1,gridLines:{display:!0,color:"#e0e0e0",lineWidth:1},ticks:{display:!0,autoSkip:!0,lineWidth:1,fontColor:"#000000",fontSize:10,minRotation:0,maxRotation:90}},g={display:!0,lineWidth:1,fontColor:"#000000"},y=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.config=(0,s.extend)(!0,{},p,n),i}return a(e,t),l(e,[{key:"getTicksText",value:function(t){return t&&t.text?t.format?t.format.call(t,t.text,t):t.text:null}},{key:"longestText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.wxChart.ctx,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.datasets,n=this,i=0;return e.forEach(function(e){if(e.display){var r=void 0;if(e.textWidth)r=e.textWidth;else{var o=n.getTicksText(e);r=t.measureText(o).width,e.textWidth=r}i=i<r?r:i}}),i}},{key:"calculateFixPadding",value:function(t,e){var n=this,i=n.wxChart.ctx;if(e.fixPadding)return e.fixPadding;if(n.isHorizontal()){var r=n.visDatasets,o=n.getTicksText(r[0]),a=n.getTicksText(r[r.length-1]);return Math.max(i.measureText(o).width,i.measureText(a).width)}return i.fontSize}},{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,i=this,r=i.config;return t=u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this,t,n),i.visDatasets=null,i._datasets=t,i.fixPadding=i.calculateFixPadding(t,r),t}},{key:"calculateBox",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.datasets,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,i=this,r=i.wxChart.ctx,o=r.fontSize,a=i.calculateTickWidth(e,t,n),l=void 0,u=void 0,c=void 0,h=void 0,d=void 0,p=void 0,g=(0,s.toRadians)(n.ticks.minRotation||0),y=(0,s.toRadians)(n.ticks.maxRotation||90),v=g,x=i.lineSpace,b=1,_=i.longestText();switch(i.isHorizontal()?(_>a?a<=r.fontSize?v=y:(v=Math.acos(a/_),h=Math.sin(v)*_+b+x+o/2,h>t.height?(h=t.height,v=Math.asin((h-b-x-o/2)/_)):v>y&&(v=y,h=Math.sin(v)*_+b+x+o/2)):h=1.5*o+b+x,c=t.width,d=t.outerWidth,p=h):(c=_+b+x+o/2,c>t.width&&(c=t.width,v=Math.acos((c-b-x-o/2)/_),v=v>y?y:v),h=t.height,d=c,p=t.outerHeight),i.position){case"left":case"top":l=t.x,u=t.y;break;case"right":l=t.x+t.width-d,u=t.y;break;case"bottom":l=t.x,u=t.y+t.height-p}return i.fontRadians=v,new f.BoxInstance(i.position,l,u,c,h,d,p)}},{key:"calculateTickWidth",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.datasets,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.box),e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,n=this,i=void 0,r=n.visDatasets,o=e.ticks.lineWidth,a=s.sum.apply(null,r.map(function(t){return t.lineWidth||o})),l=n.fixPadding;if(n.isHorizontal()){var u=t.width,c=t.marginLR,f=n.calculateTitleWidth(),h=n.config.extendLeft;0!==c?a+=2*o:0!==h&&(a+=o),i=(u-f-a-l)/(r.length-1)}else{var d=t.height,p=t.marginTB,g=n.calculateTitleWidth(),y=e.extendTop;0!==p?a+=2*o:0!==y&&(a+=o),i=(d-g-a-l)/(r.length-1)}return i}},{key:"calculateTitleWidth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config,e=void 0,n=this,i=n.wxChart.ctx;return e=n.isHorizontal()?t.title?i.measureText(t.title,t.titleFontSize).width:0:t.title?t.titleFontSize:0}},{key:"_getTicksLineWidthOffset",value:function(t,e){var n=0,i=this;e||(e=i.visDatasets);var r=this.config.ticks.lineWidth;return e.map(function(e,i){t>=i&&(n+=e.lineWidth||r)}),n}},{key:"getTicksPosition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.box,i=this,r=(i.wxChart.ctx,i.fixPadding);e||(e=i.calculateTickWidth());var o=i.visDatasets,a=void 0,l=void 0;return i.isHorizontal()?(a=t===-1?n.x-i.config.extendLeft+r/2+(i.config.extendLeft?i.config.ticks.lineWidth:0):n.lx+i._getTicksLineWidthOffset(t,o)+e*t+r/2,l="top"===i.position?n.ry-i.lineSpace:n.ly+i.lineSpace):(l=t===-1?n.y-i.config.extendTop+r/2+(i.config.extendTop?i.config.ticks.lineWidth:0):n.ly+i.calculateTitleWidth()+i._getTicksLineWidthOffset(t,o)+e*t+r/2,a="left"===i.position?n.rx-i.lineSpace:n.lx+i.lineSpace),{x:a,y:l}}},{key:"_initDrawATickText",value:function(){var t=this,e=t.wxChart.ctx;switch(t.position){case"left":e.textAlign="end",e.textBaseline="middle";break;case"right":e.textAlign="start",e.textBaseline="middle";break;case"top":e.textAlign="center",e.textBaseline="alphabetic";break;case"bottom":e.textAlign="center",e.textBaseline="top"}}},{key:"_drawATickLine",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this,o=r.wxChart.ctx,a=r.lineSpace,l=t,u=e;switch(r.position){case"left":l+=a;break;case"right":l-=a;break;case"top":u+=a;break;case"bottom":u-=a}o.beginPath(),o.moveTo(l,u),o.lineTo(t,e),o.stroke();var c=void 0;if(i&&i.text&&s.is.String(i.text)){o.save(),r._initDrawATickText(),c=i.format?i.format.call(r,i.text,i,t,e,r.fontRadians):i.text;var f=i.textWidth?i.textWidth:o.measureText(c).width;switch(r.position){case"left":o.translate(t-n/2,e+Math.sin(r.fontRadians)*f/2),o.rotate(r.fontRadians);break;case"right":o.translate(t+n/2,e+Math.sin(r.fontRadians)*f/2),o.rotate(-r.fontRadians);break;case"top":o.translate(t,e-n/2),o.rotate(-r.fontRadians);break;case"bottom":o.translate(t,e+n/2),o.rotate(r.fontRadians)}o.fillText(c,0,0),o.restore()}}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.datasets,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.box,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,i=this,r=i.wxChart.ctx,o=r.fontSize,a=i.fixPadding,l=i.calculateTickWidth(t,e,n),u=n.ticks,s=(e.x,e.y,e.width,e.outerWidth,e.height,e.outerHeight,i.visDatasets),c=i.getTicksPosition(-1,l),f=c.x,h=c.y,d=c.x,p=c.y;r.save(),r.fillStyle=u.fontColor,r.fontSize=u.fontSize,r.lineWidth=u.lineWidth;var g=i.calculateTitleWidth();i.isHorizontal()?((i.box.marginLR||n.extendLeft)&&i._drawATickLine(f,h,o),f=i.box.lx+a/2,s.map(function(t){f+=t.lineWidth,r.fillStyle=t.fontColor,r.lineWidth=t.lineWidth,r.fontSize=t.fontSize||r.fontSize,i._drawATickLine(f,h,o,t),f+=l}),f=i.box.ex-a/2-g,i.box.marginLR&&i._drawATickLine(f,h,o),r.fillStyle=u.fontColor,r.lineWidth=n.lineWidth,r.beginPath(),r.moveTo(d,h),r.lineTo(f,h),r.stroke(),n.title&&(r.save(),f+=o/2,r.fontSize=n.titleFontSize,r.textAlign="start",r.textBaseline="bottom",r.fillStyle=n.titleFontColor,r.fillText(n.title,f,h),r.restore())):(n.title&&(r.save(),r.fontSize=n.titleFontSize,r.textAlign="center",r.textBaseline="bottom",r.fillStyle=n.titleFontColor,r.fillText(n.title,f,h),r.restore()),(i.box.marginTB||n.extendTop)&&(h+=g,i._drawATickLine(f,h,o)),h=i.box.ly+a/2+g,s.map(function(t){h+=t.lineWidth,r.fillStyle=t.fontColor,r.lineWidth=t.lineWidth,r.fontSize=t.fontSize||r.fontSize,i._drawATickLine(f,h,o,t),h+=l}),h=i.box.ey-a/2,i.box.marginTB&&i._drawATickLine(f,h,o),r.fillStyle=u.fontColor,r.lineWidth=n.lineWidth,r.beginPath(),r.moveTo(f,p+g),r.lineTo(f,h),r.stroke()),r.draw(),r.restore()}},{key:"getPoint",value:function(t){return null}},{key:"lineSpace",get:function(){var t=this;return t._lineSpace?t._lineSpace:(t._lineSpace=this.config.lineSpace||.5*this.wxChart.ctx.fontSize,t._lineSpace)}}]),e}(d.default);n.default=y},{"../util/helper":13,"../util/wxCanvas":16,"./base":5,"./layout":6}],9:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("./base"),s=i(u),c=t("../util/helper"),f=t("./layout"),h={display:!0,position:"top",fullWidth:!0,fontSize:20,fontColor:"#666666",padding:10},d=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.config=(0,c.extend)(!0,{},h,n),i}return a(e,t),l(e,[{key:"init",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},this),n=e.config;if(t=t?t:n.text,c.is.Undefined(t)||c.is.Null(t))throw new Error("Text is null");return e._datasets=t,t}},{key:"calculateBox",value:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config.text,arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config),n=this,i=n.wxChart,r=(i.ctx,e.fontSize||20),o=t.x,a=t.y,l=e.padding||10,u=e.fullWidth?t.width-2*l:e.width,s=e.fullWidth?t.width:e.width,c=r,h=c+2*l;return"bottom"==e.position&&(a=t.ry-h,a=a<t.y?t.y:a),new f.BoxInstance({position:e.position,x:o,y:a,width:u,height:c,outerWidth:s,outerHeight:h})}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.text,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.box,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config,i=this,r=i.wxChart.ctx,o=e.x,a=e.y,l=e.width;e.outerWidth,e.height,e.outerHeight;if(c.is.Undefined(t)||c.is.Null(t))throw new Error("Text is null");var u=n.fontColor,s=n.fontSize;i.clear(),r.save(),r.textBaseline="top",r.textAlign="start",r.fillStyle=u,r.fontSize=s;var f=r.measureText(t).width;o+=(l-f)/2,r.fillText(t,o,a),r.restore(),r.draw()}}]),e}(s.default);n.default=d},{"../util/helper":13,"./base":5,"./layout":6}],10:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../core/scale"),s=i(u),c=t("../util/helper"),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"buildTicks",value:function(t,e,n){return t&&c.is.Array(t)?(n=n||0,e=e||t.length,t.slice(n,e)):t}},{key:"buildDatasets",value:function(t,e,n){return this.buildTicks.apply(this,arguments)}},{key:"getPoint",value:function(t){return this.getTicksPosition(t)}}]),e}(s.default);n.default=f},{"../core/scale":8,"../util/helper":13}],11:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("../core/scale"),l=i(a),u=t("../core/layout"),s=(i(u),t("../util/helper")),c={xMargin:void 0,xFirstPointSpace:"auto"},f=function(){function t(e,n,i){if(r(this,t),!e instanceof l.default&&!n instanceof l.default)throw new Error("Should be an WxScale instance");var o=this;o.xScale=e,o.yScale=n,o.config=(0,s.extend)(!0,{},c,i)}return o(t,[{key:"draw",value:function(t,e,n){var i=this,r=i.config,o=r.xMargin,a=r.xFirstPointSpace;i.yScale.init(n);var l=i.yScale.calculateBox(t,n);i.xScale.init(e);var c=i.xScale.calculateBox(t,e),f=c.outerHeight-c.marginTB-i.xScale.lineSpace;i.yScale.config.fixPadding=2*f;var h=l.outerWidth-l.marginLR-i.yScale.lineSpace,d=h-i.xScale.fixPadding/2,p=void 0;"auto"===a?p=i.xScale.config.extendLeft||Math.min(c.width/10,i.xScale.calculateTickWidth(e,c)/e.length):0===a?(n[n.length-1].text="",p=0):p=s.is.Function(a)?a(c,l,t,i.xScale,i.yScale,e,n):parseFloat(a),p&&(d-=i.xScale.config.ticks.lineWidth||1),d+=p;var g=t.x+d;s.is.Function(o)?o=o(c,l,t,i.xScale,i.yScale,e,n):o&&s.is.Number(o)||(o=0);var y=new u.BoxInstance(c.position,g,c.y,c.width-d-o,c.height,c.outerWidth-d,c.outerHeight);return i.yScale.setBox(l,!1),i.yScale.update(n),i.xScale.setBox(y,!1),i.xScale.config.extendLeft=p,i.xScale.update(e),{xBox:y,yBox:l}}}]),t}();n.default=f},{"../core/layout":6,"../core/scale":8,"../util/helper":13}],12:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":_typeof2(e))&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":_typeof2(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=t("../core/scale"),s=i(u),c=t("../util/helper"),f=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"buildTicks",value:function(t,e,n,i){var r=void 0,o=[];if(i&&i>0)r=i;else{var a=(0,c.niceNum)(t-e,!1);r=(0,c.niceNum)(a/(n-1),!0)}var l=Math.floor(e/r)*r,u=Math.ceil(t/r)*r,s=(u-l)/r;s=(0,c.almostEquals)(s,Math.round(s),r/1e3)?Math.round(s):Math.ceil(s);for(var f=0;f<s;f++)o.push(l+f*r);return o.push(u),o}},{key:"buildDatasets",value:function(t,e,n,i,r){var o=this,a=o.buildTicks(t,e,n,i);return o.isHorizontal()||a.reverse(),a.map(function(t){return(0,c.extend)({text:t+"",value:t},r)})}},{key:"calculateTickLimit",value:function(t,e){var n=this,i=e.fontSize,r=void 0,o=n.config.ticks;return r=n.isHorizontal()?Math.min(o.maxTicksLimit?o.maxTicksLimit:11,Math.ceil(t.width/50)):Math.min(o.maxTicksLimit?o.maxTicksLimit:11,Math.ceil(t.height/(2*i)))}},{key:"getPoint",value:function(t){var e=this,n=this.box,i=void 0,r=void 0,o=parseInt(e.visDatasets[0].value),a=parseInt(e.visDatasets[e.visDatasets.length-1].value),l=a-o;if(e.isHorizontal()){var u=e.getTicksPosition(e.visDatasets.length-1).x-e.getTicksPosition(0).x;i=e.getTicksPosition(0).x+u/l*(t-o),r="top"===e.position?n.ry-e.lineSpace:n.ly+e.lineSpace}else{var s=e.getTicksPosition(e.visDatasets.length-1).y-e.getTicksPosition(0).y;i="left"===e.position?n.rx-e.lineSpace:n.lx+e.lineSpace,r=e.getTicksPosition(0).y+s/l*(t-o)}return{x:Math.round(i),y:Math.round(r)}}}]),e}(s.default);n.default=f},{"../core/scale":8,"../util/helper":13}],13:[function(t,e,n){function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(){var t=Array.from(arguments);return t.reduce(function(t,e){return t+e},0)}function o(t){var e=function(e){for(var n=!0,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return _.Boolean(e)&&(n=e,e=0 in o?o.shift():null),_.Array(e)?o.forEach(function(t){var n;(n=e).push.apply(n,i(t))}):_.Object(e)&&o.forEach(function(i){for(var r in i)if(!t||i.hasOwnProperty(r)){var o=i[r],a=e[r];_.PureObject(o)?e[r]=n?C(!0,_.PureObject(a)?a:{},o):o:_.Array(o)?e[r]=n?C(!0,_.Array(a)?a:[],o):o:e[r]=o}}),e};return e}function a(){return"undefined"!=typeof wx&&"object"===("undefined"==typeof wx?"undefined":x(wx))}function l(t){if(!A)return Number.parseInt(t);var e=c();if(_.String(t)){var n=t.match(O);return n?+n[1]*e.windowWidth/750:(n=t.match(W),n?+n[1]*e.windowWidth/20:Number.parseInt(t))}if(_.Number(t))return t;throw new Error("Convert px error")}function u(t){return t*(Math.PI/180)}function s(t){return t*(180/Math.PI)}function c(){var t=void 0,e=void 0;if(A){var n=wx.getSystemInfoSync();e=n.windowWidth,t=n.windowHeight}else e=window.innerWidth,t=window.innerHeight;return{windowWidth:e,windowHeight:t}}function f(){if(A){var t=wx.getSystemInfoSync();return t.pixelRatio}return window.devicePixelRatio||1}function h(t,e){var n=Math.floor(Math.log10(t)),i=t/Math.pow(10,n),r=void 0;return r=e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10,r*Math.pow(10,n)}function d(t,e,n){return Math.abs(t-e)<n}function p(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.4,r=t?t:e,o=e,a=n?n:e,l=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),u=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)),s=l/(l+u),c=u/(l+u);s=isNaN(s)?0:s,c=isNaN(c)?0:c;var f=i*s,h=i*c;return{previous:{x:o.x-f*(a.x-r.x),y:o.y-f*(a.y-r.y)},next:{x:o.x+h*(a.x-r.x),y:o.y+h*(a.y-r.y)}}}function g(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function y(t,e){var n=g(t,e),i=n&&n.match(/(\d+)px/);return i?Number(i[1]):void 0}function v(t,e,n){var i=f();if(1!==i){var r=t.canvas;A||(r.height=r.height*i,r.width=r.width*i,t.scale(i,i),r.style.height=n+"px",r.style.width=e+"px")}}Object.defineProperty(n,"__esModule",{value:!0});var x="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)};n.sum=r,n.checkWX=a,n.wxConverToPx=l,n.toRadians=u,n.toDegrees=s,n.getWindowSize=c,n.getDPR=f,n.niceNum=h,n.almostEquals=d,n.splineCurve=p,n.getStyle=g,n.readUsedSize=y,n.retinaScale=v;var b=Object.prototype,_=n.is={};["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"].forEach(function(t){_[t]=function(e){return b.toString.call(e)==="[object "+t+"]"}}),_.Array=Array.isArray||function(t){return"[object Array]"===b.toString.call(t)},_.Object=function(t){var e="undefined"==typeof t?"undefined":x(t);return"function"===e||"object"===e&&!!t};var w={},m=w.toString,k=w.hasOwnProperty,S=k.toString,P=S.call(Object);_.PureObject=function(t){var e=void 0,n=void 0;return!(!t||"[object Object]"!==b.toString.call(t))&&(!(e=Object.getPrototypeOf(t))||(n=k.call(e,"constructor")&&e.constructor,"function"==typeof n&&S.call(n)===P))},_.Boolean=function(t){return t===!0||t===!1||"[object Boolean]"===m.call(t)},_.Null=function(t){return null===t},_.Undefined=function(t){return void 0===t},_.NaN=function(t){return _.Number(t)&&t!==+t};var C=(n.REG_HANZI=/[\u4e00-\u9fa5]/,n.REG_ALPHABET=/[a-zA-Z]/,n.REG_NUMBER=/[0-9]/,n.REG_ALPHABET_NUMBER=/[0-9a-zA-Z]/,n.extend=o(!1)),A=(n.extendOwn=o(!0),n.isWeiXinAPP=a()),O=/([\d.]+)rpx/,W=/([\d.]+)rem/;n.uid=function(){var t=0;return function(){return t++,"u"+t}}()},{}],14:[function(t,e,n){function i(t){var e=u(t.hue),n=f(e);return n<0&&(n=360+n),n}function r(t,e){if("random"===e.luminosity)return f([0,100]);if("monochrome"===e.hue)return 0;var n=s(t),i=n[0],r=n[1];switch(e.luminosity){case"bright":i=55;break;case"dark":i=r-10;break;case"light":r=55}return f([i,r])}function o(t,e,n){var i=l(t,e),r=100;switch(n.luminosity){case"dark":r=i+20;break;case"light":i=(r+i)/2;break;case"random":i=0,r=100}return f([i,r])}function a(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return y(t);case"hsl":var n=y(t);return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";case"hsla":var i=y(t),r=e.alpha||Math.random();return"hsla("+i[0]+", "+i[1]+"%, "+i[2]+"%, "+r+")";case"rgbArray":return g(t);case"rgb":var o=g(t);return"rgb("+o.join(", ")+")";case"rgba":var a=g(t),r=e.alpha||Math.random();return"rgba("+a.join(", ")+", "+r+")";default:return h(t)}}function l(t,e){for(var n=c(t).lowerBounds,i=0;i<n.length-1;i++){var r=n[i][0],o=n[i][1],a=n[i+1][0],l=n[i+1][1];if(e>=r&&e<=a){var u=(l-o)/(a-r),s=o-u*r;return u*e+s}}return 0}function u(t){if("number"==typeof parseInt(t)){var e=parseInt(t);if(e<360&&e>0)return[e,e]}if("string"==typeof t&&b[t]){var n=b[t];if(n.hueRange)return n.hueRange}return[0,360]}function s(t){return c(t).saturationRange}function c(t){t>=334&&t<=360&&(t-=360);for(var e in b){var n=b[e];if(n.hueRange&&t>=n.hueRange[0]&&t<=n.hueRange[1])return b[e]}return"Color not found"}function f(t){if(null===x)return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]));var e=t[1]||1,n=t[0]||0;x=(9301*x+49297)%233280;var i=x/233280;return Math.floor(n+i*(e-n))}function h(t){function e(t){var e=t.toString(16);return 1==e.length?"0"+e:e}var n=g(t),i="#"+e(n[0])+e(n[1])+e(n[2]);return i}function d(t,e,n){var i=n[0][0],r=n[n.length-1][0],o=n[n.length-1][1],a=n[0][1];b[t]={hueRange:e,lowerBounds:n,saturationRange:[i,r],brightnessRange:[o,a]}}function p(){d("monochrome",null,[[0,0],[100,0]]),d("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),d("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),d("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),d("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),d("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),d("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),d("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function g(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var n=t[1]/100,i=t[2]/100,r=Math.floor(6*e),o=6*e-r,a=i*(1-n),l=i*(1-o*n),u=i*(1-(1-o)*n),s=256,c=256,f=256;switch(r){case 0:s=i,c=u,f=a;break;case 1:s=l,c=i,f=a;break;case 2:s=a,c=i,f=u;break;case 3:s=a,c=l,f=i;break;case 4:s=u,c=a,f=i;break;case 5:s=i,c=a,f=l}var h=[Math.floor(255*s),Math.floor(255*c),Math.floor(255*f)];return h}function y(t){var e=t[0],n=t[1]/100,i=t[2]/100,r=(2-n)*i;return[e,Math.round(n*i/(r<1?r:2-r)*1e4)/100,r/2*100]}function v(t){for(var e=0,n=0;n!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);n++)e+=t.charCodeAt(n);return e}Object.defineProperty(n,"__esModule",{value:!0});var x=null,b={};p();var _=function t(e){if(e=e||{},void 0!==e.seed&&null!==e.seed&&e.seed===parseInt(e.seed,10))x=e.seed;else if("string"==typeof e.seed)x=v(e.seed);else{if(void 0!==e.seed&&null!==e.seed)throw new TypeError("The seed value must be an integer or string");x=null}var n=void 0,l=void 0,u=void 0;if(null!==e.count&&void 0!==e.count){var s=e.count,c=[];for(e.count=null;s>c.length;)x&&e.seed&&(e.seed+=1),c.push(t(e));return e.count=s,c}return n=i(e),l=r(n,e),u=o(n,l,e),a([n,l,u],e)};n.default=_},{}],15:[function(t,e,n){function i(t,e){if(t=t?t:"",e=e||{},t instanceof i)return t;if(!(this instanceof i))return new i(t,e);var n=r(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=q(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=q(this._r)),this._g<1&&(this._g=q(this._g)),this._b<1&&(this._b=q(this._b)),this._ok=n.ok,this._tc_id=X++}function r(t){var e={r:0,g:0,b:0},n=1,i=null,r=null,a=null,u=!1,c=!1;return"string"==typeof t&&(t=H(t)),"object"==("undefined"==typeof t?"undefined":F(t))&&(D(t.r)&&D(t.g)&&D(t.b)?(e=o(t.r,t.g,t.b),u=!0,c="%"===String(t.r).substr(-1)?"prgb":"rgb"):D(t.h)&&D(t.s)&&D(t.v)?(i=B(t.s),r=B(t.v),e=s(t.h,i,r),u=!0,c="hsv"):D(t.h)&&D(t.s)&&D(t.l)&&(i=B(t.s),a=B(t.l),e=l(t.h,i,a),u=!0,c="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=A(n),{ok:u,format:t.format||c,r:U(255,G(e.r,0)),g:U(255,G(e.g,0)),b:U(255,G(e.b,0)),a:n}}function o(t,e,n){return{r:255*O(t,255),g:255*O(e,255),b:255*O(n,255)}}function a(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var i,r,o=G(t,e,n),a=U(t,e,n),l=(o+a)/2;if(o==a)i=r=0;else{var u=o-a;switch(r=l>.5?u/(2-o-a):u/(o+a),o){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,l:l}}function l(t,e,n){function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var r,o,a;if(t=O(t,360),e=O(e,100),n=O(n,100),0===e)r=o=a=n;else{var l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;r=i(u,l,t+1/3),o=i(u,l,t),a=i(u,l,t-1/3)}return{r:255*r,g:255*o,b:255*a}}function u(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var i,r,o=G(t,e,n),a=U(t,e,n),l=o,u=o-a;if(r=0===o?0:u/o,o==a)i=0;else{switch(o){case t:i=(e-n)/u+(e<n?6:0);break;case e:i=(n-t)/u+2;break;case n:i=(t-e)/u+4}i/=6}return{h:i,s:r,v:l}}function s(t,e,n){t=6*O(t,360),e=O(e,100),n=O(n,100);var i=Math.floor(t),r=t-i,o=n*(1-e),a=n*(1-r*e),l=n*(1-(1-r)*e),u=i%6,s=[n,a,o,o,l,n][u],c=[l,n,n,a,o,o][u],f=[o,o,l,n,n,a][u];return{r:255*s,g:255*c,b:255*f}}function c(t,e,n,i){var r=[R(q(t).toString(16)),R(q(e).toString(16)),R(q(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("");
}function f(t,e,n,i,r){var o=[R(q(t).toString(16)),R(q(e).toString(16)),R(q(n).toString(16)),R(E(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function h(t,e,n,i){var r=[R(E(i)),R(q(t).toString(16)),R(q(e).toString(16)),R(q(n).toString(16))];return r.join("")}function d(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.s-=e/100,n.s=W(n.s),i(n)}function p(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.s+=e/100,n.s=W(n.s),i(n)}function g(t){return i(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.l+=e/100,n.l=W(n.l),i(n)}function v(t,e){e=0===e?0:e||10;var n=i(t).toRgb();return n.r=G(0,U(255,n.r-q(255*-(e/100)))),n.g=G(0,U(255,n.g-q(255*-(e/100)))),n.b=G(0,U(255,n.b-q(255*-(e/100)))),i(n)}function x(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.l-=e/100,n.l=W(n.l),i(n)}function b(t,e){var n=i(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,i(n)}function _(t){var e=i(t).toHsl();return e.h=(e.h+180)%360,i(e)}function w(t){var e=i(t).toHsl(),n=e.h;return[i(t),i({h:(n+120)%360,s:e.s,l:e.l}),i({h:(n+240)%360,s:e.s,l:e.l})]}function m(t){var e=i(t).toHsl(),n=e.h;return[i(t),i({h:(n+90)%360,s:e.s,l:e.l}),i({h:(n+180)%360,s:e.s,l:e.l}),i({h:(n+270)%360,s:e.s,l:e.l})]}function k(t){var e=i(t).toHsl(),n=e.h;return[i(t),i({h:(n+72)%360,s:e.s,l:e.l}),i({h:(n+216)%360,s:e.s,l:e.l})]}function S(t,e,n){e=e||6,n=n||30;var r=i(t).toHsl(),o=360/n,a=[i(t)];for(r.h=(r.h-(o*e>>1)+720)%360;--e;)r.h=(r.h+o)%360,a.push(i(r));return a}function P(t,e){e=e||6;for(var n=i(t).toHsv(),r=n.h,o=n.s,a=n.v,l=[],u=1/e;e--;)l.push(i({h:r,s:o,v:a})),a=(a+u)%1;return l}function C(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function A(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(t,e){j(t)&&(t="100%");var n=M(t);return t=U(e,G(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function W(t){return U(1,G(0,t))}function T(t){return parseInt(t,16)}function j(t){return"string"==typeof t&&t.indexOf(".")!=-1&&1===parseFloat(t)}function M(t){return"string"==typeof t&&t.indexOf("%")!=-1}function R(t){return 1==t.length?"0"+t:""+t}function B(t){return t<=1&&(t=100*t+"%"),t}function E(t){return Math.round(255*parseFloat(t)).toString(16)}function z(t){return T(t)/255}function D(t){return!!$.CSS_UNIT.exec(t)}function H(t){t=t.replace(I,"").replace(N,"").toLowerCase();var e=!1;if(J[t])t=J[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=$.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=$.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=$.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=$.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=$.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=$.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=$.hex8.exec(t))?{r:T(n[1]),g:T(n[2]),b:T(n[3]),a:z(n[4]),format:e?"name":"hex8"}:(n=$.hex6.exec(t))?{r:T(n[1]),g:T(n[2]),b:T(n[3]),format:e?"name":"hex"}:(n=$.hex4.exec(t))?{r:T(n[1]+""+n[1]),g:T(n[2]+""+n[2]),b:T(n[3]+""+n[3]),a:z(n[4]+""+n[4]),format:e?"name":"hex8"}:!!(n=$.hex3.exec(t))&&{r:T(n[1]+""+n[1]),g:T(n[2]+""+n[2]),b:T(n[3]+""+n[3]),format:e?"name":"hex"}}function L(t){var e,n;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),n=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:e,size:n}}Object.defineProperty(n,"__esModule",{value:!0});var F="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(t){return"undefined"==typeof t?"undefined":_typeof2(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":"undefined"==typeof t?"undefined":_typeof2(t)},I=/^\s+/,N=/\s+$/,X=0,q=Math.round,U=Math.min,G=Math.max,V=Math.random;i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,i,r,o,a=this.toRgb();return t=a.r/255,e=a.g/255,n=a.b/255,i=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),r=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),.2126*i+.7152*r+.0722*o},setAlpha:function(t){return this._a=A(t),this._roundA=q(100*this._a)/100,this},toHsv:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=u(this._r,this._g,this._b),e=q(360*t.h),n=q(100*t.s),i=q(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=a(this._r,this._g,this._b),e=q(360*t.h),n=q(100*t.s),i=q(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+i+"%)":"hsla("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(t){return c(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return f(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:q(this._r),g:q(this._g),b:q(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+q(this._r)+", "+q(this._g)+", "+q(this._b)+")":"rgba("+q(this._r)+", "+q(this._g)+", "+q(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:q(100*O(this._r,255))+"%",g:q(100*O(this._g,255))+"%",b:q(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+q(100*O(this._r,255))+"%, "+q(100*O(this._g,255))+"%, "+q(100*O(this._b,255))+"%)":"rgba("+q(100*O(this._r,255))+"%, "+q(100*O(this._g,255))+"%, "+q(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Y[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+h(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var o=i(t);n="#"+h(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return r?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return i(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(P,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(m,arguments)}},i.fromRatio=function(t,e){if("object"==("undefined"==typeof t?"undefined":F(t))){var n={};for(var r in t)t.hasOwnProperty(r)&&("a"===r?n[r]=t[r]:n[r]=B(t[r]));t=n}return i(t,e)},i.equals=function(t,e){return!(!t||!e)&&i(t).toRgbString()==i(e).toRgbString()},i.random=function(){return i.fromRatio({r:V(),g:V(),b:V()})},i.mix=function(t,e,n){n=0===n?0:n||50;var r=i(t).toRgb(),o=i(e).toRgb(),a=n/100,l={r:(o.r-r.r)*a+r.r,g:(o.g-r.g)*a+r.g,b:(o.b-r.b)*a+r.b,a:(o.a-r.a)*a+r.a};return i(l)},i.readability=function(t,e){var n=i(t),r=i(e);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},i.isReadable=function(t,e,n){var r,o,a=i.readability(t,e);switch(o=!1,r=L(n),r.level+r.size){case"AAsmall":case"AAAlarge":o=a>=4.5;break;case"AAlarge":o=a>=3;break;case"AAAsmall":o=a>=7}return o},i.mostReadable=function(t,e,n){var r,o,a,l,u=null,s=0;n=n||{},o=n.includeFallbackColors,a=n.level,l=n.size;for(var c=0;c<e.length;c++)r=i.readability(t,e[c]),r>s&&(s=r,u=i(e[c]));return i.isReadable(t,u,{level:a,size:l})||!o?u:(n.includeFallbackColors=!1,i.mostReadable(t,["#fff","#000"],n))};var J=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Y=i.hexNames=C(J),$=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();n.default=i},{}],16:[function(t,e,n){function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.WxCanvasRenderingContext2D=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=t("./helper"),l={width:300,height:200},u={fillStyle:"#000000",lineCap:"butt",lineJoin:"miter",miterLimit:10,lineWidth:1,strokeStyle:"#000000",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000000",font:"10px",textBaseline:"alphabetic",textAlign:"start"},s=9,c=/([\d.]+)px/,f=function(){function t(e,n,i){r(this,t);var o=this;o.isWeiXinAPP=(0,a.checkWX)(),o._config=(0,a.extend)({},l,o.initConfig(n));var u=this.acquireContext(e,n),s=u.canvas,c=u.context;return o._canvas=s,o._ctx=c,o.wxCanvasRenderingContext2D=new h(s,c,i),o}return o(t,[{key:"initConfig",value:function(t){if(t)return"undefined"!=typeof t.width&&(t.width=(0,a.wxConverToPx)(t.width)),"undefined"!=typeof t.height&&(t.height=(0,a.wxConverToPx)(t.height)),t}},{key:"acquireContext",value:function(t,e){var n=this,i=void 0,r=void 0;if(a.is.String(t))i=n.isWeiXinAPP?r=wx.createCanvasContext(t):document.getElementById(t).canvas;else if(n.isWeiXinAPP)throw new Error("Should set an id");return"undefined"!=typeof HTMLCanvasElement&&i instanceof HTMLCanvasElement&&(r=i.getContext&&i.getContext("2d")),i&&r||console.error("Failed to create WxCanvas: can't acquire context!"),this.initCanvas(),{canvas:i,context:r}}},{key:"initCanvas",value:function(){var t=this._canvas,e=this._config,n=void 0,i=void 0,r=void 0,o=void 0,l=void 0;if(this.isWeiXinAPP)n=o=e.height,i=l=e.width,r=e.display;else{var u=t.style;if(n=t.getAttribute("height"),i=t.getAttribute("width"),u.display=u.display||"block",null===i||""===i){var s=(0,a.readUsedSize)(t,"width");void 0!==s&&(t.width=s)}if(null===n||""===n)if(""===t.style.height)t.height=t.width/(e.options.aspectRatio||2);else{var c=(0,a.readUsedSize)(t,"height");void 0!==s&&(t.height=c)}}return e._wxChart={initial:{height:n,width:i,style:{display:r,height:o,width:l}}},t}},{key:"releaseContext",value:function(){var t=this._canvas,e=this._config;if(e._wxChart){var n=e._wxChart.initial;if(this.isWeiXinAPP);else{["height","width"].forEach(function(e){var i=n[e];void 0===i||null===i?t.removeAttribute(e):t.setAttribute(e,i)});var i=!0,r=!1,o=void 0;try{for(var a,l=n.style[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;t.style[u]=n.style[u]}}catch(t){r=!0,o=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}t.width=t.width}delete e._wxChart}}},{key:"getContext",value:function(t){if("2d"===t)return this.wxCanvasRenderingContext2D}},{key:"height",get:function(){if(this.isWeiXinAPP)return this._config.height;var t=(0,a.wxConverToPx)(this._canvas.getAttribute("height"));return null===t||""===t?(0,a.readUsedSize)(canvas,"height"):void 0},set:function(t){this.isWeiXinAPP||(this._canvas.height=t)}},{key:"width",get:function(){if(this.isWeiXinAPP)return this._config.width;var t=(0,a.wxConverToPx)(this._canvas.getAttribute("width"));return null===t||""===t?(0,a.readUsedSize)(canvas,"width"):void 0},set:function(t){this.isWeiXinAPP||(this._canvas.width=t)}}]),t}();n.default=f;var h=n.WxCanvasRenderingContext2D=function(){function t(e,n,i){r(this,t);var o=this;return o.canvas=e,o._ctx=n,o.isWeiXinAPP=(0,a.checkWX)(),o._ctxOptions=i,o._propertyCache=[(0,a.extend)({},u,i)],o.cp=o._propertyCache[0],o.createStyleProperty(),o.createShadowsProperty(),o.createTextProperty(),o.createLineProperty(),o.createRectProperty(),o.createGradientProperty(),o.createPathProperty(),o.createTransformationProperty(),o.createGlobalAlphaProperty(),o}return o(t,[{key:"save",value:function(){var t=this;t._ctx.save();var e=(0,a.extend)({},u,t._ctxOptions);return t._propertyCache.push(e),t.cp=e,t.cp}},{key:"restore",value:function(){var t=this;return t._ctx.restore(),null!=t.cp&&t._propertyCache.length>1&&(t._propertyCache.pop(),t.cp=t._propertyCache[t._propertyCache.length-1]),t.cp}},{key:"_wxSetPropertyCallable",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"set"+e.replace(/(\w)/,function(t){return t.toUpperCase()}),i=this;return a.is.Null(t)||a.is.Undefined(t)?t:(i.isWeiXinAPP?(i._ctx[n](t),i.cp[e]=t):(i._ctx[e]=t,i.cp[e]=i._ctx[e]),t)}},{key:"_wxSetProperty",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this;return a.is.Null(t)||a.is.Undefined(t)?t:(i.isWeiXinAPP?(i.cp[e]=t,n?i._ctx[e]=t:null):(i._ctx[e]=t,i.cp[e]=i._ctx[e]),t)}},{key:"createStyleProperty",value:function(){var t=this,e=["fillStyle","strokeStyle"];e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return t.cp[e]},set:function(n){if(n)return t._wxSetPropertyCallable(n.toLowerCase(),e)}})})}},{key:"createShadowsProperty",value:function(){var t=this,e=this;["shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor"].forEach(function(n){Object.defineProperty(e,n,{get:function(){return e.cp[n]},set:function(e){var i=t;return i.isWeiXinAPP?(i.cp[n]=e,i._ctx.setShadow(i.cp.shadowOffsetX||0,i.cp.shadowOffsetY||0,i.cp.shadowBlur||0,i.cp.shadowColor||"#000000")):a.is.Null(e)||a.is.Undefined(e)||(i._ctx[n]=e,i.cp[n]=i._ctx[n]),e}})})}},{key:"createTextProperty",value:function(){var t=this;["textAlign","textBaseline"].forEach(function(e){Object.defineProperty(t,e,{get:function(){return t.cp[e]},set:function(n){return t._wxSetProperty(n,e)}})}),Object.defineProperty(t,"font",{get:function(){return t.cp.font},set:function(e){if(t.isWeiXinAPP){var n=e.match(c);if(n){var i=+n[1];t._ctx.setFontSize(i),t.cp.font=e}}else t._ctx.font=e,t.cp.font=t._ctx.font;return t.cp.font}}),Object.defineProperty(t,"fontSize",{get:function(){return parseInt(t.cp.font)},set:function(e){var n=parseInt(e);if(!a.is.NaN(n)){var i=t.isWeiXinAPP?t.cp.font:t._ctx.font;return i=i.replace(c,n+"px"),t.isWeiXinAPP?(t._ctx.setFontSize(n),t.cp.font=i):(t._ctx.font=i,t.cp.font=t._ctx.font),t.cp.font}}})}},{key:"measureText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.fontSize,n=this;if(n.isWeiXinAPP){if(!t)return 0;var i=t.length,r=t.match(new RegExp(a.REG_HANZI,"g")),o=r?r.length:0,l=i-o;return{width:e*(l+2*o)/2+e/2}}return n._ctx.measureText(t)}},{key:"_calculateYForTextBaseline",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,i=this,r=t;if(!i.isWeiXinAPP)return r;var o=i.fontSize,a=i.textBaseline;switch(a){case"top":r=o*n/10+t;break;case"middle":r=o*n/20+t;break;case"alphabetic":}return r}},{key:"_calculateXFortextAlign",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,this),i=t;if(!n.isWeiXinAPP)return i;var r=n.textAlign;switch(r){case"end":i=t-n.measureText(e).width;break;case"center":i=t-n.measureText(e).width/2;break;case"start":}return i}},{key:"fillText",value:function(t,e,n){for(var i=arguments.length,r=Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var a=this,l=0 in r?r[0]:void 0,u=1 in r?r[1]:s;if(a.isWeiXinAPP){var c=void 0,f=void 0;return f=a._calculateYForTextBaseline(n,t,u),c=a._calculateXFortextAlign(e,t,u),a._ctx.fillText(t,c,f)}return a._ctx.fillText(t,e,n,l)}},{key:"strokeText",value:function(t,e,n){for(var i=this,r=arguments.length,o=Array(r>3?r-3:0),a=3;a<r;a++)o[a-3]=arguments[a];if(i.isWeiXinAPP)return i.fillText.apply(i,[t,e,n].concat(o));var l;return(l=i._ctx).strokeText.apply(l,[t,e,n].concat(o))}},{key:"createLineProperty",value:function(){var t=this,e=["lineCap","lineJoin","miterLimit","lineWidth"];e.forEach(function(e){Object.defineProperty(t,e,{get:function(){return t.cp[e]},set:function(n){return t._wxSetPropertyCallable(n,e)}})}),["lineDashOffset"].forEach(function(e){Object.defineProperty(t,e,{get:function(){return t.cp[e]},set:function(n){return t._wxSetProperty(n,e)}})})}},{key:"setLineDash",value:function(){}},{key:"getLineDash",value:function(){}},{key:"createRectProperty",value:function(){var t=this;["clearRect","fillRect","strokeRect"].forEach(function(e){t[e]=function(){var n;return(n=t._ctx)[e].apply(n,arguments)}})}},{key:"createGradientProperty",value:function(){var t=this;["createLinearGradient"].forEach(function(e){t[e]=function(){var n;return(n=t._ctx)[e].apply(n,arguments)}})}},{key:"createRadialGradient",value:function(t,e,n,i,r,o){var a=this;return a.isWeiXinAPP?a._ctx.createCircularGradient(t,e,n):a._ctx.createRadialGradient(t,e,n,i,r,o)}},{key:"createPathProperty",value:function(){var t=this;["beginPath","closePath","moveTo","lineTo","bezierCurveTo","quadraticCurveTo","arc","rect"].forEach(function(e){t[e]=function(){var n;return(n=t._ctx)[e].apply(n,arguments)}}),["fill","stroke"].forEach(function(e){t[e]=function(){var n;return(n=t._ctx)[e].apply(n,arguments)}})}},{key:"clip",value:function(){var t=this;if(t.isWeiXinAPP)throw new Error('WeiXin APP not support "clip" function yet!');var e;return(e=t._ctx).clip.apply(e,arguments)}},{key:"createTransformationProperty",value:function(){var t=this;["rotate","scale","translate"].forEach(function(e){t[e]=function(){var n;return(n=t._ctx)[e].apply(n,arguments)}})}},{key:"transform",value:function(){var t=this;if(t.isWeiXinAPP)throw new Error('WeiXin APP not support "transform" function yet!');var e;return(e=t._ctx).transform.apply(e,i(args))}},{key:"createGlobalAlphaProperty",value:function(){var t=this;["globalAlpha"].forEach(function(e){Object.defineProperty(t,e,{get:function(){return t.cp[e]},set:function(n){return t._wxSetPropertyCallable(n,e)}})})}},{key:"draw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isWeiXinAPP&&this._ctx.draw(t)}}]),t}()},{"./helper":13}],17:[function(t,e,n){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.WxBar=n.WxLiner=n.WxDoughnut=n.WxChart=void 0;var r=t("./charts/wxChart"),o=i(r),a=t("../src/charts/doughnut"),l=i(a),u=t("../src/charts/liner"),s=i(u),c=t("../src/charts/bar"),f=i(c);n.WxChart=o.default,n.WxDoughnut=l.default,n.WxLiner=s.default,n.WxBar=f.default},{"../src/charts/bar":1,"../src/charts/doughnut":2,"../src/charts/liner":3,"./charts/wxChart":4}]},{},[17])(17)});
//# sourceMappingURL=wx-chart.min.js.map
